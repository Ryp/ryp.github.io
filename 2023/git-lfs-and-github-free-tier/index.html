<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git LFS and Github Free Tier | Pixels May Jitter</title>
<meta name=keywords content="git,lfs,github"><meta name=description content="TL;DR: Just don&rsquo;t!
Git, binary files, and LFS Storing binary files directly in git is something you might be interested in doing, but it wasn&rsquo;t really designed for that purpose to begin with. Git is good at versioning text files, not binaries!
In short: Git by default doesn&rsquo;t generate diffs for binaries and versions the complete history for each file, which will cause your .git folder to explode in size over time."><meta name=author content><link rel=canonical href=https://ryp.github.io/2023/git-lfs-and-github-free-tier/><link crossorigin=anonymous href=/assets/css/stylesheet.9329d037bc79464b26647fb72e079cd738f5d2418b1df4da3b515db9e22cb4d9.css integrity="sha256-kynQN7x5RksmZH+3Lgec1zj10kGLHfTaO1FdueIstNk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://ryp.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ryp.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ryp.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ryp.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ryp.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Git LFS and Github Free Tier"><meta property="og:description" content="TL;DR: Just don&rsquo;t!
Git, binary files, and LFS Storing binary files directly in git is something you might be interested in doing, but it wasn&rsquo;t really designed for that purpose to begin with. Git is good at versioning text files, not binaries!
In short: Git by default doesn&rsquo;t generate diffs for binaries and versions the complete history for each file, which will cause your .git folder to explode in size over time."><meta property="og:type" content="article"><meta property="og:url" content="https://ryp.github.io/2023/git-lfs-and-github-free-tier/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-27T19:29:31+03:00"><meta property="article:modified_time" content="2023-12-27T19:29:31+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git LFS and Github Free Tier"><meta name=twitter:description content="TL;DR: Just don&rsquo;t!
Git, binary files, and LFS Storing binary files directly in git is something you might be interested in doing, but it wasn&rsquo;t really designed for that purpose to begin with. Git is good at versioning text files, not binaries!
In short: Git by default doesn&rsquo;t generate diffs for binaries and versions the complete history for each file, which will cause your .git folder to explode in size over time."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ryp.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Git LFS and Github Free Tier","item":"https://ryp.github.io/2023/git-lfs-and-github-free-tier/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git LFS and Github Free Tier","name":"Git LFS and Github Free Tier","description":"TL;DR: Just don\u0026rsquo;t!\nGit, binary files, and LFS Storing binary files directly in git is something you might be interested in doing, but it wasn\u0026rsquo;t really designed for that purpose to begin with. Git is good at versioning text files, not binaries!\nIn short: Git by default doesn\u0026rsquo;t generate diffs for binaries and versions the complete history for each file, which will cause your .git folder to explode in size over time.","keywords":["git","lfs","github"],"articleBody":" TL;DR: Just don’t!\nGit, binary files, and LFS Storing binary files directly in git is something you might be interested in doing, but it wasn’t really designed for that purpose to begin with. Git is good at versioning text files, not binaries!\nIn short: Git by default doesn’t generate diffs for binaries and versions the complete history for each file, which will cause your .git folder to explode in size over time.\nI’m working on a game and naturally this need came up. I chose Git LFS to address this issue because I worked with it before, and it seems like the most mature option for my use case so far.\nTIP: If you’re migrating over to Git LFS but you already have some binary files in git, you can clean your repo history beforehand with git-filter-branch.\nGithub Free Tier and Git LFS Github is probably where you’re already hosting your code — and they just so happen to have LFS support in the free tier, so that will be today’s focus.\nAccording to Github’s pricing page:\nEvery account using Git Large File Storage receives 1 GiB of free storage and 1 GiB a month of free bandwidth. If the bandwidth and storage quotas are not enough, you can choose to purchase an additional quota for Git LFS. Unused bandwidth doesn’t roll over month-to-month.\nThe storage limit sounds reasonable for a lot of projects, including mine — at least for the foreseeable future. Bandwidth is where it gets spicy!\nClone Clone Clone Aside from pulling and pushing, cloning should be the operation that eats up most of that bandwidth quota. To be specific:\nYour clones. This should be reasonably low — we’re good. Github Action clones; oh. Other people’s clones; WHAT! It sounds overwhelming, so let’s break it down.\nTaming Github Actions At the time of writing, my CI scripts are spawning 12 jobs that need to clone the repo to work. If you were hosting 100MB of data there, one commit and -POOF- your bandwidth quota is gone!\nA neat idea here is to cache all LFS files using the cache of Github Actions. It has its own quota, of course, but none that we should be worrying about yet.\nWith this idea, a runner would try to get the LFS files from the cache first, instead of getting them from the checkout step. The first jobs will have to warm up the cache and actually eat some LFS quota, but successive runs should just grab that data for free!\nI’m not the first to come up with the idea; there’s even a clever drop-in solution that does all that and more! It inserts itself at the checkout step and is mostly transparent.\nYou can find it at nschloe/action-cached-lfs-checkout.\nThou shall not cache! I grabbed it, added it, and pushed a few commits before going to sleep and letting the CI work for me overnight. The next day, I woke up to an email from Github telling me that my quota had been spent. Urgh.\nIt turns out there’s some kind of issue that shows up. Even if the runner logs show that no Git LFS files were pulled (except from the cache, of course), the quota goes down…\nI didn’t investigate more; my current theory is that LFS-enabled checkouts are deducted from the quota even if the runner didn’t pull any data — and I can imagine why it’s not by accident. I’ll let someone braver than me go to the bottom of the issue. In the meantime, that means that we’re getting home empty-handed. Oh well.\nHow to DoS on Github The limit I personally find obnoxious is the fact that random people on Github can just clone my project ten times and run down my free tier quota.\nI don’t have a solution for this, except setting my project to private - a deal-breaker for me.\nConclusion If anyone has a workaround for both previous issues, please let me know. In the meantime, my conclusion is that Github’s Free Tier LFS offer is not usable for most projects.\nI ended up creating a separate repo with all the asset files. I link it back to the main repo with a Git submodule and that’s good enough for me. The history of the asset repo will become big over time but won’t pollute the rest. When it stops being manageable, I hope there’ll be a better solution on the horizon, and I’ll be able to seamlessly switch.\n","wordCount":"750","inLanguage":"en","datePublished":"2023-12-27T19:29:31+03:00","dateModified":"2023-12-27T19:29:31+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ryp.github.io/2023/git-lfs-and-github-free-tier/"},"publisher":{"@type":"Organization","name":"Pixels May Jitter","logo":{"@type":"ImageObject","url":"https://ryp.github.io/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ryp.github.io/ accesskey=h title="Pixels May Jitter (Alt + H)">Pixels May Jitter</a><div class=logo-switches></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Git LFS and Github Free Tier</h1><div class=post-meta><span title='2023-12-27 19:29:31 +0300 +0300'>December 27, 2023</span></div></header><div class=post-content><blockquote><p>TL;DR: Just don&rsquo;t!</p></blockquote><h1 id=git-binary-files-and-lfs>Git, binary files, and LFS<a hidden class=anchor aria-hidden=true href=#git-binary-files-and-lfs>#</a></h1><p>Storing binary files directly in git is something you might be interested in doing, but it wasn&rsquo;t really designed for that purpose to begin with. Git is good at versioning text files, not binaries!</p><p><strong>In short:</strong> Git by default doesn&rsquo;t generate diffs for binaries and versions the complete history for each file, which will cause your <code>.git</code> folder to explode in size over time.</p><p>I&rsquo;m working on <a href=https://github.com/Ryp/reaper>a game</a> and naturally this need came up. I chose Git LFS to address this issue because I worked with it before, and it seems like the most mature option for my use case so far.</p><p><strong>TIP:</strong> If you&rsquo;re migrating over to Git LFS but you already have some binary files in git, you can clean your repo history beforehand with <a href=https://git-scm.com/docs/git-filter-branch>git-filter-branch</a>.</p><h1 id=github-free-tier-and-git-lfs>Github Free Tier and Git LFS<a hidden class=anchor aria-hidden=true href=#github-free-tier-and-git-lfs>#</a></h1><p>Github is probably where you&rsquo;re already hosting your code — and they just so happen to have LFS support in the free tier, so that will be today&rsquo;s focus.</p><p>According to Github&rsquo;s <a href=https://docs.github.com/en/billing/managing-billing-for-git-large-file-storage/about-billing-for-git-large-file-storage>pricing page</a>:</p><blockquote><p>Every account using Git Large File Storage receives <strong>1 GiB of free storage</strong> and <strong>1 GiB a month of free bandwidth</strong>. If the bandwidth and storage quotas are not enough, you can choose to purchase an additional quota for Git LFS. Unused bandwidth doesn&rsquo;t roll over month-to-month.</p></blockquote><p>The storage limit sounds reasonable for a lot of projects, including mine — at least for the foreseeable future. Bandwidth is where it gets spicy!</p><h1 id=clone-clone-clone>Clone Clone Clone<a hidden class=anchor aria-hidden=true href=#clone-clone-clone>#</a></h1><p>Aside from pulling and pushing, cloning should be the operation that eats up most of that bandwidth quota. To be specific:</p><ul><li>Your clones. This should be reasonably low — we&rsquo;re good.</li><li><strong>Github Action clones</strong>; oh.</li><li><strong>Other people&rsquo;s clones</strong>; WHAT!</li></ul><p>It sounds overwhelming, so let&rsquo;s break it down.</p><h1 id=taming-github-actions>Taming Github Actions<a hidden class=anchor aria-hidden=true href=#taming-github-actions>#</a></h1><p>At the time of writing, my CI scripts are spawning 12 jobs that need to clone the repo to work. If you were hosting 100MB of data there, one commit and <em>-POOF-</em> your bandwidth quota is gone!</p><p>A neat idea here is to cache all LFS files using the cache of Github Actions. It has its own quota, of course, but none that we should be worrying about yet.</p><p>With this idea, a runner would try to get the LFS files from the cache first, instead of getting them from the checkout step. The first jobs will have to warm up the cache and actually eat some LFS quota, but successive runs should just grab that data for free!</p><p>I&rsquo;m not the first to come up with the idea; there&rsquo;s even a clever drop-in solution that does all that and more! It inserts itself at the checkout step and is mostly transparent.</p><p>You can find it at <a href=https://github.com/nschloe/action-cached-lfs-checkout>nschloe/action-cached-lfs-checkout</a>.</p><h1 id=thou-shall-not-cache>Thou shall not cache!<a hidden class=anchor aria-hidden=true href=#thou-shall-not-cache>#</a></h1><p>I grabbed it, added it, and pushed a few commits before going to sleep and letting the CI work for me overnight. The next day, I woke up to an email from Github telling me that my quota had been spent. Urgh.</p><p>It turns out there&rsquo;s some kind of <a href=https://github.com/nschloe/action-cached-lfs-checkout/issues/2>issue</a> that shows up. Even if the runner logs show that no Git LFS files were pulled (except from the cache, of course), the quota goes down&mldr;</p><p>I didn&rsquo;t investigate more; my current theory is that LFS-enabled checkouts are deducted from the quota even if the runner didn&rsquo;t pull any data — and I can imagine why it&rsquo;s not by accident. I&rsquo;ll let someone braver than me go to the bottom of the issue. In the meantime, that means that we&rsquo;re getting home empty-handed. Oh well.</p><h1 id=how-to-dos-on-github>How to DoS on Github<a hidden class=anchor aria-hidden=true href=#how-to-dos-on-github>#</a></h1><p>The limit I personally find obnoxious is the fact that random people on Github can just clone my project ten times and run down my free tier quota.</p><p>I don&rsquo;t have a solution for this, except setting my project to private - a deal-breaker for me.</p><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>If anyone has a workaround for both previous issues, please let me know. In the meantime, my conclusion is that Github&rsquo;s Free Tier LFS offer is not usable for most projects.</p><p>I ended up creating a separate repo with all the asset files. I link it back to the main repo with a Git submodule and that&rsquo;s good enough for me. The history of the asset repo will become big over time but won&rsquo;t pollute the rest. When it stops being manageable, I hope there&rsquo;ll be a better solution on the horizon, and I&rsquo;ll be able to seamlessly switch.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ryp.github.io/tags/git/>git</a></li><li><a href=https://ryp.github.io/tags/lfs/>lfs</a></li><li><a href=https://ryp.github.io/tags/github/>github</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://ryp.github.io/>Pixels May Jitter</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>